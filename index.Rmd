---
author: "Januar Harianto"
title: "Introduction to respR"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{respR}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, echo = F}
knitr::opts_chunk$set(collapse = TRUE, comment = "#>")
```

# Introduction to `respR`
`respR` is an R package that provides a structural, reproducible workflow for the processing and analysis of respirometry and other related data. You are expected to at least have a basic understanding of R to use this package. If you know how to read Excel and/or .csv files and store them as `data.frame` objects in R, you should be able to use `respR` with relative ease. 

It is recommend that you download the latest versions of RStudio (https://shiny.rstudio.com/) and R (http://www.r-project.org/). If you already have RStudio installed, go to the Help menu and click "Check for Updates". 


```{r, echo=FALSE}
library(knitcitations); cleanbib()
cite_options(citation_format = "pandoc", check.entries = TRUE)
library(bibtex)
library(respR)
library(knitr)
library(readr)
library(readxl)
library(kableExtra)
Sys.setenv(TZ="Australia/Sydney")
# set pander table-layout options
library(pander)
panderOptions('table.alignment.default', function(df)
    ifelse(sapply(df, is.numeric), 'right', 'left'))
panderOptions('table.split.table', Inf)
panderOptions('big.mark', ",")
panderOptions('keep.trailing.zeros', TRUE)

# listfunctions <- readxl::read_excel('../tables/list-of-functions.xlsx')
# conversions <- readxl::read_excel("../tables/conversion-units.xlsx")

opts_chunk$set(collapse = TRUE, comment = "#>", tidy = TRUE, cache = TRUE, 
  highlight = TRUE, fig.width = 7, fig.height = 5)
```

# Package Installation

The latest version of `respR` can be installed from our GitHub repository. The installation process is easy with the `devtools` package, which needs to be installed first:

```{r, eval = F}
install.packages("devtools")
```

You can then install and load `respR` by running the following code:
```{r, eval = F}
devtools::install_github("januarharianto/respR") # Install respR
library(respR) # Load the package

```

Please note that the installation will also download all the dependencies required to run the package.

# Usage

When working with respirometry data, you will often need to:

1. Ensure that the data, or at least a subset of the data, is representative of the research question of interest.
2. Perform an initial analysis of the data to estimate the rate of change in oxygen concentration or amount.
3. Correct for background usage of oxygen by micro-organisms.
4. Scale the resulting usage rate to the volume (of the chamber/respirometry medium) and mass (of the animal/specimen), and convert to appropriate units.

The `respR` package contains several functions to make these actions quick and easy:

- It provides visual feedbacks and diagnostic plots to help you subset and analyse your data.
- It uses computational techniques such as rolling regressions and kernel density estimates to estimate ranked maximum, minimum or best fit sections of the data.
- By separating the workflow into a series of connected functions, you can "mix and match" functions to help you achieve your result.



# A typical workflow

To explore `respR` and its main functions we have provided example data that can be used immediately once the package is loaded. The data are `urchins.rd`, `intermittent.rd`, `sardine.rd` and `squid.rd`. These data were obtained from past experiments and more information can be obtained by invoking the `?` command, for instance, `?urchins.rd`. 


## Step 1: Use `inspect_data()` to check for common errors
`respR` was designed to work best with `data.frame` objects. This includes objects of class `data.frame`, `data.table` and `tibble`. The user should already know how to import data into this format as it is the fundemental data structure in R. Once data is imported, we use `inspect_data()` to quickly scan it for common issues. 

```{r}
# Check data for errors
int <- inspect_data(urchins.rd)
```




<!-- [inspect]: https://januarharianto.github.io/respR/reference/inspect_data.html -->
<!-- [bg]: https://januarharianto.github.io/respR/reference/calc_rate.bg.html -->
<!-- [calc]: https://januarharianto.github.io/respR/reference/calc_rate.html -->
<!-- [auto]: https://januarharianto.github.io/respR/reference/auto_rate.html -->
<!-- [adjust]: https://januarharianto.github.io/respR/reference/adjust_rate.html -->
<!-- [rate]: https://januarharianto.github.io/respR/reference/convert_rate.html -->
