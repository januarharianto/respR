<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Reporting reproducibile analyses • respR</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Reporting reproducibile analyses">
<meta property="og:description" content="respR">
<meta property="og:image" content="https://januarharianto.github.io/respR/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">respR</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.3.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/respR.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">Documentation</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Vignettes
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li class="dropdown-header">---- Complete Workflows ----</li>
    <li>
      <a href="../articles/closed.html">Closed-chamber respirometry</a>
    </li>
    <li>
      <a href="../articles/intermittent_short.html">Intermittent-flow respirometry: Short experiment</a>
    </li>
    <li>
      <a href="../articles/intermittent_long.html">Intermittent-flow respirometry: Long experiment</a>
    </li>
    <li>
      <a href="../articles/flowthrough.html">Flowthrough respirometry</a>
    </li>
    <li>
      <a href="../articles/oxycrit.html">Critical oxygen values (PCrit)</a>
    </li>
    <li>
      <a href="../articles/oxy_production.html">Oxygen production respirometry</a>
    </li>
    <li class="dropdown-header">---- Function Guides ----</li>
    <li>
      <a href="../articles/inspecting.html">inspect: Inspecting data</a>
    </li>
    <li>
      <a href="../articles/subset_data.html">subset_data: Subset data by time, row, or oxygen ranges</a>
    </li>
    <li>
      <a href="../articles/calc_rate.html">calc_rate: Manually select and calculate rates</a>
    </li>
    <li>
      <a href="../articles/calc_rate.int.html">calc_rate.int: Manual extraction of rates in intermittent-flow respirometry</a>
    </li>
    <li>
      <a href="../articles/auto_rate.html">auto_rate: Automatic detection of linear rates</a>
    </li>
    <li>
      <a href="../articles/auto_rate.int.html">auto_rate.int: Automatic extraction of rates in intermittent-flow respirometry</a>
    </li>
    <li>
      <a href="../articles/adjust_rate.html">adjust_rate: Adjusting rates for background</a>
    </li>
    <li>
      <a href="../articles/select_rate.html">select_rate: Exploring and filtering results</a>
    </li>
    <li>
      <a href="../articles/format_time.html">format_time: Convert date-time data to numeric time</a>
    </li>
    <li>
      <a href="../articles/convert_DO.html">convert_DO: Convert between units of dissolved oxygen</a>
    </li>
    <li class="dropdown-header">---- Miscellaneous ----</li>
    <li>
      <a href="../articles/importing.html">Importing files from oxygen probe systems</a>
    </li>
    <li>
      <a href="../articles/twopoint.html">Two-point rate calculation</a>
    </li>
    <li>
      <a href="../articles/subsample.html">Thin larger datasets</a>
    </li>
    <li>
      <a href="../articles/tidyverse.html">Integration with the tidyverse</a>
    </li>
    <li>
      <a href="../articles/reproducibility.html">Reporting reproducibile analyses</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    More
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/contact.html">Contact</a>
    </li>
    <li>
      <a href="../articles/release_notes.html">Release Notes</a>
    </li>
    <li>
      <a href="../articles/citations.html">respR Citations</a>
    </li>
    <li>
      <a href="../articles/future.html">Future Features</a>
    </li>
    <li>
      <a href="../articles/refs.html">References</a>
    </li>
    <li class="dropdown-submenu">
      <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">Archived</a>
      <ul class="dropdown-menu" role="menu">
<li>
          <a href="../articles/archive/intermittent_old.html">Intermittent-flow respirometry: Alternative approaches</a>
        </li>
        <li>
          <a href="../articles/archive/v2_code_change.html">v2.0: Code changes</a>
        </li>
        <li>
          <a href="../articles/archive/v1_code.html">v1.1: How to install and run older code</a>
        </li>
        <li>
          <a href="../articles/archive/auto_rate_performance.html">auto_rate: Performance</a>
        </li>
        <li>
          <a href="../articles/archive/auto_rate_comp.html">auto_rate: Comparisons with LoLinR</a>
        </li>
        <li>
          <a href="../articles/archive/oxy_crit_comp.html">oxy_crit: Comparisons with other packages</a>
        </li>
        <li>
          <a href="../articles/archive/oxy_crit_disc.html">oxy_crit: Discussion of Pcrit estimation methods</a>
        </li>
        <li>
          <a href="../articles/archive/packages_comp.html">respR: Comparisons with other R packages</a>
        </li>
        <li>
          <a href="../articles/archive/usage.html">respR: When to use respR</a>
        </li>
      </ul>
</li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/januarharianto/respr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Reporting reproducibile analyses</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/januarharianto/respr/blob/HEAD/vignettes/reproducibility.Rmd" class="external-link"><code>vignettes/reproducibility.Rmd</code></a></small>
      <div class="hidden name"><code>reproducibility.Rmd</code></div>

    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>One of the main motivations in creating <code>respR</code> was to
promote open, reproducible respirometry analyses.</p>
<p>Respirometry is ubiquitous in experimental biology, however there is
a lack of standard approaches in analysing respirometry data. Reporting
of respirometry analyses is often incomplete, vague or lacking in detail
(<a href="https://januarharianto.github.io/respR/articles/refs.html#references">Killen
et al. 2021</a>). This is sometimes understandable given journal word
limits, however it hinders attempts to reproduce or scrutinise the data
and analyses. In particular, many analysis criteria and parameters are
under-reported. For example, the criteria used to select regions over
which rates were determined, or in the case of maximum or minimum rates,
the width used when fitting multiple regressions (<a href="https://januarharianto.github.io/respR/articles/refs.html#references">Prinzing
et al. 2021</a>).</p>
<p>In the era of cheap data storage, and easy sharing of code and files
online, there is little reason why all stages of analyses and raw data
cannot be made available to reviewers, readers and other investigators
as supplementary material or in specialised online repositories. We have
designed <code>respR</code> to help make this process
straightforward.</p>
</div>
<div class="section level2">
<h2 id="readable-concise-code">Readable, concise code<a class="anchor" aria-label="anchor" href="#readable-concise-code"></a>
</h2>
<p>The functions in <code>respR</code> have been designed to have clear,
unambiguous inputs describing the parameters used in analysis.
Therefore, given some familiarity with the package functions, the code
is very human-readable, and it is usually clear under what parameters an
analysis was conducted. We have minimised the number of function
operators where possible, mainly to streamline and simplify analyses,
but this also has the side benefit of making input code less verbose and
more readable.</p>
<p>This readable code, along with the fact that an end-to-end workflow
could potentially consist of processing raw data through as few as three
functions, means a <code>respR</code> analysis for a single experiment
could consist of only a few lines of code. Combine this with <a href="https://r4ds.had.co.nz/pipes.html" class="external-link">piping</a> and code is even
more concise. This example uses the native <code>|&gt;</code> pipes
introduced in <a href="https://www.r-bloggers.com/2021/05/new-features-in-r-4-1-0/" class="external-link">R
v4.1</a>):</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">urchins.rd</span> <span class="op">|&gt;</span>                                            <span class="co"># Using the urchins data,</span></span>
<span>  <span class="fu"><a href="../reference/inspect.html">inspect</a></span><span class="op">(</span><span class="fl">1</span>, <span class="fl">15</span><span class="op">)</span> <span class="op">|&gt;</span>                                      <span class="co"># inspect columns 1 and 15, then</span></span>
<span>  <span class="fu"><a href="../reference/calc_rate.html">calc_rate</a></span><span class="op">(</span>from <span class="op">=</span> <span class="fl">4</span>, to <span class="op">=</span> <span class="fl">29</span>, by <span class="op">=</span> <span class="st">"time"</span><span class="op">)</span> <span class="op">|&gt;</span>           <span class="co"># calculate rate between times 4 and 29</span></span>
<span>  <span class="fu"><a href="../reference/adjust_rate.html">adjust_rate</a></span><span class="op">(</span>by <span class="op">=</span> <span class="fu"><a href="../reference/calc_rate.bg.html">calc_rate.bg</a></span><span class="op">(</span><span class="va">urchins.rd</span>, time <span class="op">=</span> <span class="fl">1</span>,    <span class="co"># calculate the background...</span></span>
<span>                                oxygen <span class="op">=</span> <span class="fl">18</span><span class="op">:</span><span class="fl">19</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span>      <span class="co"># ... and adjust rate</span></span>
<span>  <span class="fu"><a href="../reference/convert_rate.html">convert_rate</a></span><span class="op">(</span>oxy.unit <span class="op">=</span> <span class="st">"mgl-1"</span>, time.unit <span class="op">=</span> <span class="st">"m"</span>,     </span>
<span>               output.unit <span class="op">=</span> <span class="st">"mg/s/kg"</span>, </span>
<span>               volume <span class="op">=</span> <span class="fl">1.09</span>, mass <span class="op">=</span> <span class="fl">0.19</span><span class="op">)</span>               <span class="co"># and finally convert</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="transparent-open-analyses">Transparent, open analyses<a class="anchor" aria-label="anchor" href="#transparent-open-analyses"></a>
</h2>
<p>While there is commercial software which can analyse respirometry
data (e.g. AutoResp by Loligo), these are often poorly designed,
complex, inefficient, and often prohibitively expensive and locked to
single platforms, if not single computers. The main drawback of these is
that they are not open-source, and so inherently prevent transparent and
reproducible analyses.</p>
<p>Alternatively, many investigators have their own analysis workflows
in Excel and R. These are perfectly fine and work well on an individual
basis or within a lab, but even if the spreadsheet or code is shared,
their custom nature means that reproducibility is difficult for an
independent user or may require a significant time commitment.
<code>respR</code> seeks to solve these problems.</p>
<p>We have designed respR to avoid it being a black box, into which data
is fed and a result spit out with the user having little understanding
or oversight into what is happening. We feel it important a user
understands their data, which is why we include exploratory functions to
visualise the data, look for common errors, and prepare it for analysis.
We designed the functions to allow straightforward natural-language
querying of different parts of the data in terms the user can
understand, so they should always be aware of what they are doing. All
the analytical functions also provide visualisations of the analysis and
results. All output objects support the base R <code><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot()</a></code>,
<code><a href="https://rdrr.io/r/base/print.html" class="external-link">print()</a></code> and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> commands, which allow
quick assessment of the most important outputs. As with all R packages
and functions, the code underlying the analysis is easily viewable, so
advanced users can investigate how it works for themselves. Through
hosting the code on <a href="https://github.com/januarharianto/respR" class="external-link">Github</a> we encourage
users to contribute to the code via Issues, Pull Requests, and
Forking.</p>
</div>
<div class="section level2">
<h2 id="documenting-reproducible-workflows">Documenting reproducible workflows<a class="anchor" aria-label="anchor" href="#documenting-reproducible-workflows"></a>
</h2>
<div class="section level3">
<h3 id="simple-sharing-of-scripts">Simple sharing of scripts<a class="anchor" aria-label="anchor" href="#simple-sharing-of-scripts"></a>
</h3>
<p>The easiest way of providing a reproducible workflow using
<code>respR</code> is to include the raw data as a <code>.csv</code> or
<code>.rda</code> file , and include a <code>.R</code> script containing
all the code used to import and process that data file.</p>
<p>Because <code>respR</code> has been designed as an end-to-end
workflow covering every step in the analysis of respirometry data, code
for all stages from raw data input, data preparation and exploration,
determining rates, and converting the rates to specific units can be
included in a single file, and usually this will comprise only a few
lines of code. There may be additional data inputs (experiment specific
parameters such as volumes, masses, temperatures, etc.). These can be
entered as values in the code, but ideally would be included as an
additional data file, and most R users should be familiar with how to
format these in good database-style formatting, and how to reference the
relevant entries in code.</p>
<p>To demonstrate how brief an entire end-to-end <code>respR</code>
workflow can be, here’s an example of a typical script which uses the
<code>sardine.rd</code> dataset included in the package. We inspect the
data, determine both the most linear rate, and the maximum rate over a
10 minute period, and finally convert rates to mass-specific units.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Load the package</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/januarharianto/respr" class="external-link">respR</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Import data</span></span>
<span><span class="co">## Here we would typically use import_file() to import a data file, </span></span>
<span><span class="co">## but sardine.rd is already loaded</span></span>
<span></span>
<span><span class="co">## Experiment parameters (this might be an existing object containing data for many experiments)</span></span>
<span><span class="va">exp_param</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>volume <span class="op">=</span> <span class="fl">12.3</span>, mass <span class="op">=</span> <span class="fl">21.41</span>, DO.unit <span class="op">=</span> <span class="st">"mg/l"</span>, time.unit <span class="op">=</span> <span class="st">"s"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Inspect the data, and save it as an object</span></span>
<span><span class="va">exp_1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inspect.html">inspect</a></span><span class="op">(</span><span class="va">sardine.rd</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Determine rates - most linear, and highest rate over 15 mins (900 rows)</span></span>
<span><span class="va">exp_1_linear_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auto_rate.html">auto_rate</a></span><span class="op">(</span><span class="va">exp_1</span><span class="op">)</span></span>
<span><span class="va">exp_1_max_rate</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/auto_rate.html">auto_rate</a></span><span class="op">(</span><span class="va">exp_1</span>, method <span class="op">=</span> <span class="st">"highest"</span>, width <span class="op">=</span> <span class="fl">900</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Convert rates to mass-specific units using the experimental parameters</span></span>
<span><span class="va">exp_1_linear_rate_conv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_rate.html">convert_rate</a></span><span class="op">(</span><span class="va">exp_1_linear_rate</span>, </span>
<span>                                       output.unit <span class="op">=</span> <span class="st">"mg/h/kg"</span>,</span>
<span>                                       oxy.unit <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">DO.unit</span>,</span>
<span>                                       time.unit <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">time.unit</span>,</span>
<span>                                       volume <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">volume</span>,</span>
<span>                                       mass <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">mass</span><span class="op">)</span></span>
<span></span>
<span><span class="va">exp_1_max_rate_conv</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/convert_rate.html">convert_rate</a></span><span class="op">(</span><span class="va">exp_1_max_rate</span>, </span>
<span>                                    output.unit <span class="op">=</span> <span class="st">"mg/h/kg"</span>,</span>
<span>                                    oxy.unit <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">DO.unit</span>,</span>
<span>                                    time.unit <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">time.unit</span>,</span>
<span>                                    volume <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">volume</span>,</span>
<span>                                    mass <span class="op">=</span> <span class="va">exp_param</span><span class="op">$</span><span class="va">mass</span><span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Results</span></span>
<span><span class="va">exp_1_linear_rate_conv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # print.convert_rate # ------------------</span></span>
<span><span class="co">#&gt; Rank 1 of 39 rates:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Input:</span></span>
<span><span class="co">#&gt; [1] -0.000661</span></span>
<span><span class="co">#&gt; [1] "mg/L" "sec" </span></span>
<span><span class="co">#&gt; Converted:</span></span>
<span><span class="co">#&gt; [1] -1.37</span></span>
<span><span class="co">#&gt; [1] "mgO2/hr/kg"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; To see other results use 'pos' input. </span></span>
<span><span class="co">#&gt; To see full results use summary().</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span>
<span></span>
<span><span class="va">exp_1_max_rate_conv</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; # print.convert_rate # ------------------</span></span>
<span><span class="co">#&gt; Rank 1 of 6614 rates:</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Input:</span></span>
<span><span class="co">#&gt; [1] -0.00114</span></span>
<span><span class="co">#&gt; [1] "mg/L" "sec" </span></span>
<span><span class="co">#&gt; Converted:</span></span>
<span><span class="co">#&gt; [1] -2.35</span></span>
<span><span class="co">#&gt; [1] "mgO2/hr/kg"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; To see other results use 'pos' input. </span></span>
<span><span class="co">#&gt; To see full results use summary().</span></span>
<span><span class="co">#&gt; -----------------------------------------</span></span></code></pre></div>
<p>This shows how an entire analysis workflow can be conducted in only a
few lines of code.</p>
</div>
<div class="section level3">
<h3 id="saving-single-respr-objects">Saving single respR objects<a class="anchor" aria-label="anchor" href="#saving-single-respr-objects"></a>
</h3>
<p>For more documented analyses, for documenting parts of a workflow, or
for saving the outputs of specific functions, we can use the base R
<code>saveRDS</code> function. The main functions in <code>respR</code>
output R objects which include raw data, results and also metadata in
the form of subsetting criteria, models and input parameters. Thus, each
of these objects contains all the information saved from the previous
function that created it, and so the information required to continue
through the <code>respR</code> workflow from any intermediate stage.</p>
<p>These objects can be saved using <code>saveRDS</code> and distributed
like any other file. This can allow each stage of the analysis to be
saved, and shared or archived. An advantage of using one of these
objects is that an analysis can be continued from a certain point
without having to re-run the entire workflow. For example, data can be
imported, inspected, a rate determined through the
<code>auto_rate</code> function, and the resulting output object
exported via <code>saveRDS</code>. This could be shared with a colleague
who can then import it into their own R project using
<code>readRDS</code>, and feed it into <code>convert_rate</code> to
convert it to whatever units they wish without having to run any other
parts of the workflow.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Running this code will show how saveRDS and readRDS preserves values </span></span>
<span><span class="co">## correctly, and gives the exact same results when used in further </span></span>
<span><span class="co">## stages of the workflow</span></span>
<span></span>
<span><span class="co">## Inspect</span></span>
<span><span class="va">urch_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/inspect.html">inspect</a></span><span class="op">(</span><span class="va">urchins.rd</span>, time <span class="op">=</span> <span class="fl">1</span>, oxygen <span class="op">=</span> <span class="fl">15</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Export resulting object to working directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">saveRDS</a></span><span class="op">(</span><span class="va">urch_data</span>, file <span class="op">=</span> <span class="st">"urch_data.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Re-import it to new object</span></span>
<span><span class="va">urch_data_in</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html" class="external-link">readRDS</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"urch_data.rds"</span><span class="op">)</span></span>
<span></span>
<span><span class="co">## Check values are preserved - should be TRUE</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/all.equal.html" class="external-link">all.equal</a></span><span class="op">(</span><span class="va">urch_data</span>, <span class="va">urch_data_in</span><span class="op">)</span></span></code></pre></div>
<p>One example of using this method to document a reproducible workflow,
would be to save the object created by <code>inpect</code> and include
that along with the script for the rest of the analysis rather than
including original data files. This object includes the raw data, but
using it tells the next user the data has already been checked for
common errors such as missing data, and if so these errors fixed, and so
that step is unnecessary.</p>
</div>
<div class="section level3">
<h3 id="saving-all-respr-objects">Saving all respR objects<a class="anchor" aria-label="anchor" href="#saving-all-respr-objects"></a>
</h3>
<p>To document or archive an entire working environment we can use the
<code><a href="https://rdrr.io/r/base/save.html" class="external-link">save.image()</a></code> command. This function saves to the working
directory every object and value in the current R environment (though
not scripts, i.e. <code>.R</code> files.). This way, all objects from
the analysis of a single experiment, or multiple experiments, can be
saved to a single file.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Will save entire environment to current working directory</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/save.html" class="external-link">save.image</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"experiment_1.rda"</span><span class="op">)</span></span></code></pre></div>
<p>The environment can be reimported by double clicking on the file
(usually RStudio will ask if you want to import it to the current
project), or <code><a href="https://rdrr.io/r/base/load.html" class="external-link">load()</a></code> command.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">## Will load entire environment to current working project. </span></span>
<span><span class="co">## Path to the file must be specified, or it must be in current working directory.</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/load.html" class="external-link">load</a></span><span class="op">(</span>file <span class="op">=</span> <span class="st">"experiment_1.rda"</span><span class="op">)</span></span></code></pre></div>
<p>This avoids having to save every object individually.</p>
</div>
</div>
<div class="section level2">
<h2 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h2>
<p>We hope this brief vignette has helped you understand how
<code>respR</code> may be used to produce open and reproducible science
from your respirometry data. As scientists, we have probably all wished
we could get the raw data from a publication, or struggled to extract
data from old plots and tables. So we encourage you to use our package,
and when you come to submit your paper include your analysis as
supplementary material to allow others to scrutinise and reproduce your
results, and in the future utilise your data for new analyses. This
benefits the science community as a whole.</p>
<p>If you do use <code>respR</code> in your analyses, please cite the <a href="https://besjournals.onlinelibrary.wiley.com/doi/10.1111/2041-210X.13162" class="external-link">publication</a>
(or run <code>citation("respR")</code>), and let us <a href="https://januarharianto.github.io/respR/articles/contact.html">know</a>.
We would be happy to help promote and increase the visibility of your
studies.</p>
<p>See <code><a href="../articles/citations.html">vignette("citations")</a></code> for a running list of projects
which have used <code>respR</code>.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Nicholas Carey, Januar Harianto.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
