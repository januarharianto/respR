<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Comparative performance of auto_rate and LoLinR • respR</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Comparative performance of auto_rate and LoLinR">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">respR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">1.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../articles/respR.html">Getting Started</a>
</li>
<li>
  <a href="../reference/index.html">List of Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/closed.html">Closed-chamber respirometry</a>
    </li>
    <li>
      <a href="../articles/importing.html">Importing your data</a>
    </li>
    <li>
      <a href="../articles/auto_rate.html">Automatic detection of respirometry rates</a>
    </li>
    <li>
      <a href="../articles/intermittent.html">Intermittent-flow respirometry: Simple example</a>
    </li>
    <li>
      <a href="../articles/intermittent2.html">Intermittent-flow respirometry: Complex example</a>
    </li>
    <li>
      <a href="../articles/flowthrough.html">Flowthrough respirometry</a>
    </li>
    <li>
      <a href="../articles/pcrit.html">Pcrit analysis</a>
    </li>
    <li>
      <a href="../articles/twopoint.html">Two-point analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Discussion
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/usage.html">When to use respR</a>
    </li>
    <li>
      <a href="../articles/performance.html">Performance of auto_rate</a>
    </li>
    <li>
      <a href="../articles/auto_rate_comp.html">Comparing auto_rate and LoLinR</a>
    </li>
    <li>
      <a href="../articles/packages_comp.html">A comparison of respR with other R packages</a>
    </li>
    <li>
      <a href="../articles/tidyverse.html">respR and the tidyverse</a>
    </li>
    <li>
      <a href="../articles/reproducibility.html">Reproducibility</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/januarharianto/respr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Comparative performance of auto_rate and LoLinR</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/januarharianto/respr/blob/master/vignettes/auto_rate_comp.Rmd"><code>vignettes/auto_rate_comp.Rmd</code></a></small>
      <div class="hidden name"><code>auto_rate_comp.Rmd</code></div>

    </div>

    
    
<!-- In this vignette we compare `auto_rate()` to a different method for detecting linear regions in time series data. -->
<p>To our current knowledge, one other R package, <a href="https://colin-olito.github.io/LoLinR/vignettes/LoLinR.html"><code>LoLinR</code></a> (Olito et al. 2017), performs ranking techniques on time series data. <!-- This is similar to `respR`'s `auto_rate()` function which contains a method (`method = "linear"`) to detect linear regions. --> The two packages use fundamentally different techniques to estimate linear regions of data. We detail <code><a href="../reference/auto_rate.html">auto_rate()</a></code>’s methods <a href="https://januarharianto.github.io/respR/articles/auto_rate.html">here</a>. <code>LoLinR</code>’s methods can be found in their online vignette <a href="https://colin-olito.github.io/LoLinR/vignettes/LoLinR.html">here</a>, and Olito et al. (JEB, 2017).</p>
<p>To summarise the main differences between the two methods:</p>
<!-- LoLinR is designed to be able to do this on any time series datasets, not just respirometry data.  -->
<!-- However, the same is true of `auto_rate()`; while `respR` has a focus as an end-to-end solution for processing and analysing respirometry experiments, `auto_rate()` can similarly be used on any data.  -->
<!-- The two methods use fundamentally different techniques to detect linear regions of data; we detail `auto_rate()` methods [here](https://januarharianto.github.io/respR/articles/auto_rate.html). `LoLinR` methods can be found in `LoLinR`'s online vignette [here](https://github.com/colin-olito/LoLinR), and Olito et al. (JEB, 2017). To summarise the main differences: -->
<ol style="list-style-type: decimal">
<li><p><code><a href="../reference/auto_rate.html">auto_rate()</a></code> uses machine learning techniques to detect linear segments first before running linear regressions on these data regions. <code>LoLinR</code>, by contrast, performs all possible linear regressions on the data first, and then implements a ranking algorithm such that the most linear regions are top-ranked.</p></li>
<li><p><code>LoLinR</code>’s algorithms use three different metrics to select linear data, in which at least one performs very well to detect linear segments – even if a small amount data is provided (&lt;100 samples). In comparison, <code><a href="../reference/auto_rate.html">auto_rate()</a></code> uses only one method (kernel density estimation), which performs less accurately at smaller sample sizes, but that accuracy increases greatly with more data available.</p></li>
</ol>
<!-- 3. `auto_rate()` is several orders of magnitude faster, even as it performs hundreds to thousands of rolling regressions at a time. It is a better option for large data, while LoLinR might be the function of choice for smaller datasets since its speed decreases *exponentially* as data gets bigger.  --><ol start="3" style="list-style-type: decimal">
<li>Because <code><a href="../reference/auto_rate.html">auto_rate()</a></code> detects linear data first before it performs linear regressions, it is several orders of magnitude faster than <code>LoLinR</code>. Thus <code><a href="../reference/auto_rate.html">auto_rate()</a></code> is ideal for large data. On the other hand, <code>LoLinR</code> is restricted to small datasets (see below).</li>
</ol>
<p>Thus, even though both packages can perform linear metric analysis and determine the “most linear” section of a plot, the user will observe varying differences between the two methods used (see Comparisons section below).</p>
<div id="processing-times" class="section level2">
<h2 class="hasAnchor">
<a href="#processing-times" class="anchor"></a>Processing times</h2>
<p>The main function in <code>LoLinR</code> is called <code>rankLocReg()</code>. The time it takes this function to process data follows an exponential relationship with its length, illustrated below:</p>
<p><img src="https://raw.githubusercontent.com/januarharianto/respR/develop/vignettes/img/lolinr_times.png" width="700px"></p>
<p><code>rankLocReg()</code> was run on different sized datasets (blue dots) and the time to completion recorded. These analyses were run in RStudio on the same dataset subset to the appropriate length, on a 2017 Macbook Pro with 3.1 GHz Intel Core i5 processor, 16GB RAM, and no other applications running. The orange dots are estimated completion times for larger datasets extrapolated from the results. <strong>Note the log scale.</strong></p>
<p>As we can see, any dataset larger than around 400 to 500 in length takes a prohibitively long time to be processed by <code>rankLocReg()</code>. In a test under the same conditions, <code><a href="../reference/auto_rate.html">auto_rate()</a></code> processed a dataset of 5000 datapoints in size in 1.25 seconds; <code>rankLocReg()</code> would take 47 days. One dataset included in <code>respR</code> (<code>squid.rd</code>) is over 34,000 datapoints in length. <code><a href="../reference/auto_rate.html">auto_rate()</a></code> completed analysis of this dataset in 18.5 seconds; under the exponential relationship of <code>rankLocReg()</code> this would take approximately <em>163 years</em> to be processed. In reality, it is likely (as we have experienced) RAM limits will cause the <code>rankLocReg()</code> process to crash well before these durations are reached.</p>
<!-- Therefore, it is clear `rankLocReg()` is not a practical solution for analysis of data more than a few hundred datapoints long.  -->
<p>The developers of <code>LoLinR</code> are aware of the processing limitations of <code>rankLocReg()</code>, and in the documentaton for the package recommend thinning (i.e. subsampling) datasets longer than 500 in length using another function that they provided, <code>thinData()</code>. <!-- However, thinning datasets of thousands to tens of thousands of datapoints to only a few hundred would inevitably cause loss of information and is not an acceptable solution.  --> However, thinning datasets of thousands to tens of thousands of datapoints to only a few hundred would inevitably cause loss of information, which may not be desirable in certain use cases.</p>
</div>
<div id="comparisons" class="section level2">
<h2 class="hasAnchor">
<a href="#comparisons" class="anchor"></a>Comparisons</h2>
<p>We provide below comparisons of the outputs of <code><a href="../reference/auto_rate.html">auto_rate()</a></code> and <code>rankLocReg()</code> on simulated data generated by the <code><a href="../reference/sim_data.html">sim_data()</a></code> function and on real experimental data included in both packages. Because of <code>rankLocReg()</code>’s limitations for large data, the analysis of all data in these comparisons is restricted to 150 data points. There are no such restrictions in <code><a href="../reference/auto_rate.html">auto_rate()</a></code>, so for experimental data it was used without modifications to its length. However for <code>rankLocReg()</code> they were, as recommended in the <code>LoLinR</code> documentation, subsampled beforehand to 150 datapoints in length using the <code>thinData()</code> function. Because <code>rankLocReg()</code> has three different methods (<code>z</code>, <code>eq</code>, and <code>pc</code>) to rank the data, for the comparisons below we selected the most accurate method that best ranked the data in each case.</p>
<p>We show the output diagnostic plots for each function on six sample data analyses, plus a summary of the top ranked linear section identified showing the rate, and start and end times of the estimated linear region.</p>
<div id="simulated-data-default" class="section level3">
<h3 class="hasAnchor">
<a href="#simulated-data-default" class="anchor"></a>Simulated data: default</h3>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">769</span>)</a>
<a class="sourceLine" id="cb1-2" data-line-number="2">sim1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_data.html">sim_data</a></span>(<span class="dv">150</span>)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-3-1.png" width="681.6"></p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="co">## respR:</span></a>
<a class="sourceLine" id="cb2-2" data-line-number="2">rspr1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/auto_rate.html">auto_rate</a></span>(sim1<span class="op">$</span>df)</a>
<a class="sourceLine" id="cb2-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb2-4" data-line-number="4"><span class="co">#&gt; 7 kernel density peaks detected and ranked.</span></a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-3-2.png" width="681.6"></p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="co">## LoLinR:</span></a>
<a class="sourceLine" id="cb3-2" data-line-number="2">lir1 &lt;-<span class="st"> </span><span class="kw">rankLocReg</span>(<span class="dt">xall =</span> sim1<span class="op">$</span>df<span class="op">$</span>x, <span class="dt">yall =</span> sim1<span class="op">$</span>df<span class="op">$</span>y, <span class="fl">0.2</span>, <span class="dt">method =</span> <span class="st">'pc'</span>)</a>
<a class="sourceLine" id="cb3-3" data-line-number="3"><span class="co">#&gt; rankLocReg fitted 7260 local regressions</span></a>
<a class="sourceLine" id="cb3-4" data-line-number="4"><span class="kw">plot</span>(lir1)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-4-1.png" width="681.6"></p>
<pre><code>#&gt; Compare top ranked outputs</code></pre>
<pre><code>#&gt; respR
#&gt; Rate: -0.0162
#&gt; Start Time: 35
#&gt; End Time: 146</code></pre>
<pre><code>#&gt; LoLinR
#&gt; Rate: -0.0164
#&gt; Start Time: 32
#&gt; End Time: 150</code></pre>
</div>
<div id="simulated-data-corrupted" class="section level3">
<h3 class="hasAnchor">
<a href="#simulated-data-corrupted" class="anchor"></a>Simulated data: corrupted</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">112</span>)</a>
<a class="sourceLine" id="cb7-2" data-line-number="2">sim2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_data.html">sim_data</a></span>(<span class="dv">150</span>, <span class="dt">type =</span> <span class="st">"corrupted"</span>)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-7-1.png" width="681.6"></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb8-1" data-line-number="1"><span class="co">## respR:</span></a>
<a class="sourceLine" id="cb8-2" data-line-number="2">rspr2 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/auto_rate.html">auto_rate</a></span>(sim2<span class="op">$</span>df)</a>
<a class="sourceLine" id="cb8-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb8-4" data-line-number="4"><span class="co">#&gt; 31 kernel density peaks detected and ranked.</span></a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-7-2.png" width="681.6"></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb9-1" data-line-number="1"><span class="co">## LoLinR:</span></a>
<a class="sourceLine" id="cb9-2" data-line-number="2">lir2 &lt;-<span class="st"> </span><span class="kw">rankLocReg</span>(<span class="dt">xall =</span> sim2<span class="op">$</span>df<span class="op">$</span>x, <span class="dt">yall =</span> sim2<span class="op">$</span>df<span class="op">$</span>y, <span class="fl">0.2</span>, <span class="st">"pc"</span>)</a>
<a class="sourceLine" id="cb9-3" data-line-number="3"><span class="co">#&gt; rankLocReg fitted 7260 local regressions</span></a>
<a class="sourceLine" id="cb9-4" data-line-number="4"><span class="kw">plot</span>(lir2)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-8-1.png" width="681.6"></p>
<pre><code>#&gt; Compare top ranked outputs</code></pre>
<pre><code>#&gt; respR
#&gt; Rate: -0.0227
#&gt; Start Time: 79
#&gt; End Time: 149</code></pre>
<pre><code>#&gt; LoLinR
#&gt; Rate: -0.0228
#&gt; Start Time: 87
#&gt; End Time: 130</code></pre>
</div>
<div id="simulated-data-segmented" class="section level3">
<h3 class="hasAnchor">
<a href="#simulated-data-segmented" class="anchor"></a>Simulated data: segmented</h3>
<div class="sourceCode" id="cb13"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb13-1" data-line-number="1"><span class="kw">set.seed</span>(<span class="dv">546</span>)</a>
<a class="sourceLine" id="cb13-2" data-line-number="2">sim3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/sim_data.html">sim_data</a></span>(<span class="dv">150</span>, <span class="dt">type =</span> <span class="st">"segmented"</span>)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-11-1.png" width="681.6"></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb14-1" data-line-number="1"><span class="co">## respR:</span></a>
<a class="sourceLine" id="cb14-2" data-line-number="2">rspr3 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/auto_rate.html">auto_rate</a></span>(sim3<span class="op">$</span>df)</a>
<a class="sourceLine" id="cb14-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb14-4" data-line-number="4"><span class="co">#&gt; 6 kernel density peaks detected and ranked.</span></a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-11-2.png" width="681.6"></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb15-1" data-line-number="1"><span class="co">## LoLinR:</span></a>
<a class="sourceLine" id="cb15-2" data-line-number="2">lir3 &lt;-<span class="st"> </span><span class="kw">rankLocReg</span>(<span class="dt">xall =</span> sim3<span class="op">$</span>df<span class="op">$</span>x, <span class="dt">yall =</span> sim3<span class="op">$</span>df<span class="op">$</span>y, <span class="fl">0.2</span>, <span class="st">"pc"</span>)</a>
<a class="sourceLine" id="cb15-3" data-line-number="3"><span class="co">#&gt; rankLocReg fitted 7260 local regressions</span></a>
<a class="sourceLine" id="cb15-4" data-line-number="4"><span class="kw">plot</span>(lir3)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-12-1.png" width="681.6"></p>
<pre><code>#&gt; Compare top ranked outputs</code></pre>
<pre><code>#&gt; respR
#&gt; Rate: -0.0402
#&gt; Start Time: 15
#&gt; End Time: 106</code></pre>
<pre><code>#&gt; LoLinR
#&gt; Rate: -0.0398
#&gt; Start Time: 40
#&gt; End Time: 118</code></pre>
</div>
<div id="experimental-data-urchindata-from-lolinr" class="section level3">
<h3 class="hasAnchor">
<a href="#experimental-data-urchindata-from-lolinr" class="anchor"></a>Experimental data: UrchinData from LoLinR</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1"><span class="co">## respR:</span></a>
<a class="sourceLine" id="cb19-2" data-line-number="2">Urch1 &lt;-<span class="st"> </span><span class="kw"><a href="../reference/select.html">select</a></span>(UrchinData, <span class="dv">1</span>, <span class="dv">4</span>)</a>
<a class="sourceLine" id="cb19-3" data-line-number="3"></a>
<a class="sourceLine" id="cb19-4" data-line-number="4">respr_urchindata &lt;-<span class="st"> </span><span class="kw"><a href="../reference/auto_rate.html">auto_rate</a></span>(Urch1)</a>
<a class="sourceLine" id="cb19-5" data-line-number="5"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb19-6" data-line-number="6"><span class="co">#&gt; 4 kernel density peaks detected and ranked.</span></a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-15-1.png" width="681.6"></p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1"><span class="co">## LoLinR:</span></a>
<a class="sourceLine" id="cb20-2" data-line-number="2">lolinr_urchindata  &lt;-<span class="st">  </span><span class="kw">rankLocReg</span>(<span class="dt">xall=</span>UrchinData<span class="op">$</span>time, <span class="dt">yall=</span>UrchinData<span class="op">$</span>C, <span class="dt">alpha=</span><span class="fl">0.2</span>, <span class="dt">method=</span><span class="st">"z"</span>)</a>
<a class="sourceLine" id="cb20-3" data-line-number="3"><span class="co">#&gt; rankLocReg fitted 8911 local regressions</span></a>
<a class="sourceLine" id="cb20-4" data-line-number="4"><span class="kw">plot</span>(lolinr_urchindata)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-16-1.png" width="681.6"></p>
<pre><code>#&gt; Compare top ranked outputs</code></pre>
<pre><code>#&gt; respR
#&gt; Rate: -0.1363
#&gt; Start Time: 18.5
#&gt; End Time: 69</code></pre>
<pre><code>#&gt; LoLinR
#&gt; Rate: -0.1441
#&gt; Start Time: 47
#&gt; End Time: 63.5</code></pre>
</div>
<div id="experimental-data-cormorantdata-from-lolinr" class="section level3">
<h3 class="hasAnchor">
<a href="#experimental-data-cormorantdata-from-lolinr" class="anchor"></a>Experimental data: CormorantData from LoLinR</h3>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb24-1" data-line-number="1"><span class="co">## respR:</span></a>
<a class="sourceLine" id="cb24-2" data-line-number="2">rcor &lt;-<span class="st"> </span><span class="kw"><a href="../reference/auto_rate.html">auto_rate</a></span>(CormorantData)</a>
<a class="sourceLine" id="cb24-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb24-4" data-line-number="4"><span class="co">#&gt; 43 kernel density peaks detected and ranked.</span></a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-19-1.png" width="681.6"></p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb25-1" data-line-number="1"><span class="co">## LoLinR:</span></a>
<a class="sourceLine" id="cb25-2" data-line-number="2">lcor  &lt;-<span class="st">  </span><span class="kw">thinData</span>(CormorantData, <span class="dt">by =</span> <span class="kw">nrow</span>(CormorantData)<span class="op">/</span><span class="dv">150</span>)<span class="op">$</span>newData1 <span class="co"># thin data</span></a>
<a class="sourceLine" id="cb25-3" data-line-number="3">lcoregs &lt;-<span class="st"> </span><span class="kw">rankLocReg</span>(<span class="dt">xall=</span>lcor<span class="op">$</span>Time, <span class="dt">yall=</span>lcor<span class="op">$</span>VO2.ml.min, <span class="dt">alpha=</span><span class="fl">0.2</span>, </a>
<a class="sourceLine" id="cb25-4" data-line-number="4">  <span class="dt">method=</span><span class="st">"eq"</span>, <span class="dt">verbose=</span><span class="ot">FALSE</span>)</a>
<a class="sourceLine" id="cb25-5" data-line-number="5">lcoregs  &lt;-<span class="st">  </span><span class="kw">reRank</span>(lcoregs, <span class="dt">newMethod=</span><span class="st">'pc'</span>)</a>
<a class="sourceLine" id="cb25-6" data-line-number="6"><span class="kw">plot</span>(lcoregs)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-20-1.png" width="681.6"></p>
<pre><code>#&gt; Compare top ranked outputs</code></pre>
<pre><code>#&gt; respR
#&gt; Rate: 1.16313
#&gt; Start Time: 2.83
#&gt; End Time: 5.41</code></pre>
<pre><code>#&gt; LoLinR
#&gt; Rate: 0.47775
#&gt; Start Time: 2.44
#&gt; End Time: 4.97</code></pre>
</div>
<div id="experimental-data-squid-rd-from-respr" class="section level3">
<h3 class="hasAnchor">
<a href="#experimental-data-squid-rd-from-respr" class="anchor"></a>Experimental data: squid.rd from respR</h3>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb29-1" data-line-number="1"><span class="co">## respR:</span></a>
<a class="sourceLine" id="cb29-2" data-line-number="2">rsquid &lt;-<span class="st"> </span><span class="kw"><a href="../reference/auto_rate.html">auto_rate</a></span>(squid.rd)</a>
<a class="sourceLine" id="cb29-3" data-line-number="3"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb29-4" data-line-number="4"><span class="co">#&gt; 32 kernel density peaks detected and ranked.</span></a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-23-1.png" width="681.6"></p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb30-1" data-line-number="1"><span class="co">## LoLinR:</span></a>
<a class="sourceLine" id="cb30-2" data-line-number="2">lsquid &lt;-<span class="st"> </span><span class="kw">thinData</span>(squid.rd, <span class="dt">by =</span> <span class="kw">nrow</span>(squid.rd)<span class="op">/</span><span class="dv">150</span>)<span class="op">$</span>newData1</a>
<a class="sourceLine" id="cb30-3" data-line-number="3">lsquidregs &lt;-<span class="st"> </span><span class="kw">rankLocReg</span>(<span class="dt">xall=</span>lsquid<span class="op">$</span>Time, <span class="dt">yall=</span>lsquid<span class="op">$</span>o2, <span class="dt">alpha=</span><span class="fl">0.2</span>, </a>
<a class="sourceLine" id="cb30-4" data-line-number="4">  <span class="dt">method=</span><span class="st">"eq"</span>)</a>
<a class="sourceLine" id="cb30-5" data-line-number="5"><span class="co">#&gt; Warning in pcRank((allRegs$ciRange)): input/output have ties</span></a>
<a class="sourceLine" id="cb30-6" data-line-number="6"><span class="co">#&gt; rankLocReg fitted 7260 local regressions</span></a>
<a class="sourceLine" id="cb30-7" data-line-number="7"><span class="kw">plot</span>(lsquidregs)</a></code></pre></div>
<p><img src="auto_rate_comp_files/figure-html/unnamed-chunk-24-1.png" width="681.6"></p>
<pre><code>#&gt; Compare top ranked outputs</code></pre>
<pre><code>#&gt; respR
#&gt; Rate: -0.00030151
#&gt; Start Time: 3589
#&gt; End Time: 15219</code></pre>
<pre><code>#&gt; LoLinR
#&gt; Rate: -0.00030188
#&gt; Start Time: 4321
#&gt; End Time: 12738</code></pre>
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>We can see from the above comparisons that in these examples on small datasets, <code>auto_rate</code> and <code>rankLocReg</code> output similar results in identifying linear regions. Rates identified are often (within the magnitudes of the data ranges used) only marginally different, and typically the start and end times of the linear region identified are similar, or at least the regions widely overlap.</p>
<p>Again, we must stress that comparisons between these functions are limited because of the need in <code>rankLocReg</code> to subsample long data to a manageable length. It is likely that some of the minor differences in results comes from reducing the number of datapoints <code>rankLocReg</code> has to work with, though some is also presumably attributable to the different analytical methodologies. These results do suggest that this thinning does not radically alter the data, and so the results from <code>rankLocReg</code> would be valid in these cases. However, this is a very limited comparison: in these examples we only had to thin two of the datasets. There may be cases where such thinning alters the characteristics of the data such that <code>rankLocReg</code> identifies incorrect linear segments, or identifies different linear sections depending on the degree of thinning performed. This could particularly be the case where the rates fluctuate rapidly, or data is of very high resolution. The same is of course true of <code>auto_rate</code>; the algorithms are complex but fallible, so it may on occasion identify spurious or incorrect linear regions. So we again remind users that they should always examine the results output by <code>auto_rate</code> to ensure they are relevant to the question of interest.</p>
<p>In the case of which of these methods to use with your respirometry data, caution would suggest that all possible datapoints be used in analyses if possible, and as we have shown here and in the <a href="https://januarharianto.github.io/respR/articles/performance.html">performance vignette</a> <code>auto_rate</code> handles large data easily, while <code>LoLinR</code> clearly does not.</p>
<p>Users are very much encouraged to explore both functions and compare the outputs with their own data. However, given that <code>auto_rate</code> and <code>rankLocReg</code> appear to perform similarly in identifying linear regions of data, but in <code>auto_rate</code> a reduction in data resolution is unnecessary, we would advocate the use of <code>auto_rate</code> for your respirometry data unless you have a particular reason to believe <code>LoLinR</code> package will output more relevant results.</p>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
<p>Olito, C., White, C. R., Marshall, D. J., &amp; Barneche, D. R. (2017). Estimating monotonic rates from biological data using local linear regression. The Journal of Experimental Biology, jeb.148775-jeb.148775. <a href="doi:10.1242/jeb.148775" class="uri">doi:10.1242/jeb.148775</a></p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#processing-times">Processing times</a></li>
      <li><a href="#comparisons">Comparisons</a></li>
      <li><a href="#summary">Summary</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Januar Harianto, Nicholas Carey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
