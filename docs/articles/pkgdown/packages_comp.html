<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>respR vs. other R packages • respR</title>
<link rel="shortcut icon" type="image/x-icon" href="../../favicon.ico">
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../../pkgdown.css" rel="stylesheet">
<script src="../../pkgdown.js"></script><meta property="og:title" content="respR vs. other R packages">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../../index.html">respR</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li>
  <a href="../../articles/respR.html">Getting Started</a>
</li>
<li>
  <a href="../../reference/index.html">List of Functions</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Documentation
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/closed.html">Quick-start using closed-chamber respirometry</a>
    </li>
    <li>
      <a href="../../articles/importing.html">Importing your data</a>
    </li>
    <li>
      <a href="../../articles/auto_rate.html">Automatic detection of respirometry rates</a>
    </li>
    <li>
      <a href="../../articles/intermittent.html">Intermittent-flow respirometry: Simple example</a>
    </li>
    <li>
      <a href="../../articles/intermittent2.html">Intermittent-flow respirometry: Complex example</a>
    </li>
    <li>
      <a href="../../articles/flowthrough.html">Flowthrough respirometry</a>
    </li>
    <li>
      <a href="../../articles/pcrit.html">Pcrit analysis</a>
    </li>
    <li>
      <a href="../../articles/intermittent.html">Two-point analysis</a>
    </li>
  </ul>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Discussion
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../../articles/usage.html">When to use respR</a>
    </li>
    <li>
      <a href="../../articles/performance.html">Performance of auto_rate</a>
    </li>
    <li>
      <a href="../../articles/auto_rate_comp.html">Comparing auto_rate and LoLinR</a>
    </li>
    <li>
      <a href="../../articles/packages_comp.html">A comparison of respR with other R packages</a>
    </li>
    <li>
      <a href="../../articles/tidyverse.html">respR and the tidyverse</a>
    </li>
    <li>
      <a href="../../articles/reproducibility.html">Reproducibility</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/januarharianto/respr">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>respR vs. other R packages</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/januarharianto/respr/blob/master/vignettes/pkgdown/packages_comp.Rmd"><code>vignettes/pkgdown/packages_comp.Rmd</code></a></small>
      <div class="hidden name"><code>packages_comp.Rmd</code></div>

    </div>

    
    
<p>We have designed <code>respR</code> to be able to explore, process and analyse any and all aquatic respirometry data, independent of the system used to collect it. In fact because of the unitless nature of the majority of functions in the package, other respirometry data, or indeed other time series data examining other variables can be analysed in <code>respR</code>.</p>
<p>There are only a couple of other <code>R</code> packages that are focused towards respirometry analysis; <a href="https://cran.r-project.org/web/packages/rMR/index.html">rMR</a>, and <a href="https://fishresp.org">FishResp</a> (there is one other, <a href="https://cran.r-project.org/web/packages/respirometry/index.html">respirometry</a>, but it is not focussed on processing data). These packages have quite specific focuses; both <code>rMR</code> and <code>FishResp</code> are centered around processing intermittent-flow, swim tunnel respirometry data, in particular from Loligo Systems equipment. Neither has the universal focus of <code>respR</code>, and while it is possible to process other respirometry data using these packages it is far from straightforward. However, they are excellent packages within their own focuses and we would encourage users to explore them and how they work; they may contain functionality that suits your particular analyses or workflows better than <code>respR</code>.</p>
<p>Neither of these packages however are particularly analytical in nature; they lack any functionality similar to the <code><a href="../../reference/auto_rate.html">auto_rate()</a></code> function in <code>respR</code>, which allows statistically robust, objective identification of linear segments in respirometry data. Only one package to our knowledge has a similar functionality, <a href="https://github.com/colin-olito/LoLinR">LoLinR</a> which also seeks to identify linear regions in time-series data, although with no particular focus on respirometry. We compare the performance of <code><a href="../../reference/auto_rate.html">auto_rate()</a></code> and <code>LoLinR</code> in the <strong>LINK</strong> vignette.</p>
<p>These packages instead rely on manual selection of data regions in respirometry data from which to extract oxygen uptake rates. <code>respR</code> also has this functionality as an option, and in this vignette we briefly compare the outputs of these packages with <code>respR</code>, and other overlapping functionality.</p>
<div id="respr-and-respirometry" class="section level2">
<h2 class="hasAnchor">
<a href="#respr-and-respirometry" class="anchor"></a><code>respR</code> and <code>respirometry</code>
</h2>
<p>The <a href="https://cran.r-project.org/web/packages/respirometry/index.html">respirometry</a> package by Matthew Birk has several useful utility functions for planning and conducting respirometry experiments. However, as the documentation states “Tools focus on helping the researcher setup and conduct experiments. Analysis of the resulting data is not a focus”. Therefore, this package has little in common with <code>respR</code>.</p>
<p>The only real functionality overlap with <code>respR</code> is the conversion function <code>conv_o2</code>, similar to the <code>convert_DO</code> function in <code>respR</code>. Both support the same units, and because both functions rely on the unit standards package <code>marelac</code> they give identical or very similar results. Minor differences are probably dues to the precision with which variables are handled internally:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## respR
<span class="kw"><a href="../../reference/convert_DO.html">convert_DO</a></span>(<span class="fl">7.9</span>, <span class="dt">from =</span> <span class="st">"mg/L"</span>, <span class="dt">to =</span> <span class="st">"umol/L"</span>, <span class="dt">t =</span> <span class="dv">25</span>, <span class="dt">S =</span> <span class="dv">35</span>, <span class="dt">P =</span> <span class="fl">1.01325</span>)
<span class="co">#&gt; [1] 246.8843</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Input unit: mg/L</span>
<span class="co">#&gt; Output unit: umol/L</span>
## respirometry
<span class="kw">conv_o2</span>(<span class="dt">o2 =</span> <span class="fl">7.9</span>, <span class="dt">from =</span> <span class="st">"mg_per_l"</span>, <span class="dt">to =</span> <span class="st">"umol_per_l"</span>, <span class="dt">temp =</span> <span class="dv">25</span>, <span class="dt">sal =</span> <span class="dv">35</span>, 
    <span class="dt">atm_pres =</span> <span class="fl">1013.25</span>)
<span class="co">#&gt; [1] 246.8843</span>

## respR
<span class="kw"><a href="../../reference/convert_DO.html">convert_DO</a></span>(<span class="dv">85</span>, <span class="dt">from =</span> <span class="st">"%"</span>, <span class="dt">to =</span> <span class="st">"mL/L"</span>, <span class="dt">t =</span> <span class="dv">25</span>, <span class="dt">S =</span> <span class="dv">35</span>, <span class="dt">P =</span> <span class="fl">1.01325</span>)
<span class="co">#&gt; Note: Input or output units require Atmospheric Pressure input (i.e. P = ??). </span>
<span class="co">#&gt;  Default value of P = 1.013253 bar has been used.</span>
<span class="co">#&gt; [1] 4.383186</span>
<span class="co">#&gt; </span>
<span class="co">#&gt;  Input unit: %</span>
<span class="co">#&gt; Output unit: mL/L</span>
## respirometry
<span class="kw">conv_o2</span>(<span class="dt">o2 =</span> <span class="dv">85</span>, <span class="dt">from =</span> <span class="st">"percent_a.s."</span>, <span class="dt">to =</span> <span class="st">"ml_per_l"</span>, <span class="dt">temp =</span> <span class="dv">25</span>, <span class="dt">sal =</span> <span class="dv">35</span>, 
    <span class="dt">atm_pres =</span> <span class="fl">1013.25</span>)
<span class="co">#&gt; [1] 4.393156</span></code></pre></div>
<p><code>respR</code> has a couple of minor advantages; the <code>respR</code> output is more informative, clearly stating the input and output units; and a “fuzzy” string matching algorithm is used to automatically recognise variations in base units, allowing natural, intuitive input, e.g.<code>"ml/s"</code>, <code>"mL/sec"</code>, <code>"milliliter/s"</code>, and <code>"millilitre/second"</code> are all equally identified as <code>mL/s</code>.</p>
<p>Overall however, in this small overlap in functionality the packages essentially perform identically.</p>
</div>
<div id="respr-and-rmr" class="section level2">
<h2 class="hasAnchor">
<a href="#respr-and-rmr" class="anchor"></a><code>respR</code> and <code>rMR</code>
</h2>
<p>The <a href="https://cran.r-project.org/web/packages/rMR/index.html">rMR</a> package by Tyler L. Moulton focuses specifically on analysis of data from Loligo Systems hardware (i.e. Witrox probes), and generally on intermittent-flow, fish respirometry. We should note that as of writing (Sep 2018) this package has not been updated in nearly 2 years.</p>
<p>There are several areas of functionality where <code>rMR</code> and <code>respR</code> overlap:</p>
<div id="importing-raw-data" class="section level4">
<h4 class="hasAnchor">
<a href="#importing-raw-data" class="anchor"></a>Importing raw data</h4>
<p><code>rMR</code> allows importing of raw Witrox data files. <code>respR</code> also has this functionality in the <code>import_data</code> function, which as well as Witrox, supports several other systems. Here is typical code from each to do this. The example file and import code (slightly adapted) are taken from the <code>rMR</code> <a href="https://github.com/tyler-l-moulton/rMR">Github</a> repo and README file found there.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## rMR Import
columns_to_import &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"Date.time"</span>, <span class="st">"times"</span>, <span class="st">"Bar.Pressure.hpa"</span>, <span class="st">"Phase"</span>, <span class="st">"temp.C"</span>, 
    <span class="st">"DO.mgL"</span>)

fish_rmr &lt;-<span class="st"> </span><span class="kw">get.witrox.data</span>(<span class="st">"fishMR.txt"</span>, <span class="dt">lines.skip =</span> <span class="dv">10</span>, <span class="dt">delimit =</span> <span class="st">"tab"</span>, 
    <span class="dt">choose.names =</span> <span class="ot">TRUE</span>, <span class="dt">chosen.names =</span> columns_to_import, <span class="dt">format =</span> <span class="st">"%d/%m/%Y %I:%M:%S %p"</span>)

## respR Import
fish_respr &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/import_file.html">import_file</a></span>(<span class="st">"fishMR.txt"</span>)
<span class="co">#&gt; Loligo Witrox Logger Detected</span></code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(fish_rmr)
<span class="co">#&gt;               Date.time      times Bar.Pressure.hpa Phase temp.C DO.mgL</span>
<span class="co">#&gt; 1 02/07/2015 3:57:59 PM 3518711879             1013 29.87  23.49  7.852</span>
<span class="co">#&gt; 2 02/07/2015 3:58:00 PM 3518711880             1013 29.88  23.43  7.864</span>
<span class="co">#&gt; 3 02/07/2015 3:58:01 PM 3518711881             1013 29.88  23.43  7.864</span>
<span class="co">#&gt; 4 02/07/2015 3:58:02 PM 3518711882             1013 29.90  23.42  7.853</span>
<span class="co">#&gt; 5 02/07/2015 3:58:03 PM 3518711883             1013 29.87  23.46  7.862</span>
<span class="co">#&gt; 6 02/07/2015 3:58:04 PM 3518711884             1013 29.87  23.48  7.856</span>
<span class="co">#&gt;              std.time</span>
<span class="co">#&gt; 1 2015-07-02 15:57:59</span>
<span class="co">#&gt; 2 2015-07-02 15:58:00</span>
<span class="co">#&gt; 3 2015-07-02 15:58:01</span>
<span class="co">#&gt; 4 2015-07-02 15:58:02</span>
<span class="co">#&gt; 5 2015-07-02 15:58:03</span>
<span class="co">#&gt; 6 2015-07-02 15:58:04</span>
<span class="kw">head</span>(fish_respr)
<span class="co">#&gt;    time              datetime pressure phase  temp oxygen</span>
<span class="co">#&gt; 1:    0 02/07/2015 3:57:59 PM     1013 29.87 23.49  7.852</span>
<span class="co">#&gt; 2:    1 02/07/2015 3:58:00 PM     1013 29.88 23.43  7.864</span>
<span class="co">#&gt; 3:    2 02/07/2015 3:58:01 PM     1013 29.88 23.43  7.864</span>
<span class="co">#&gt; 4:    3 02/07/2015 3:58:02 PM     1013 29.90 23.42  7.853</span>
<span class="co">#&gt; 5:    4 02/07/2015 3:58:03 PM     1013 29.87 23.46  7.862</span>
<span class="co">#&gt; 6:    5 02/07/2015 3:58:04 PM     1013 29.87 23.48  7.856</span></code></pre></div>
<p>These both appear to perform well, on this file at least. The resulting data frames are similar, containing all the relevant data, although <code>respR</code> adds a numeric <code>time</code> column, which we find is easier to use in further analyses.</p>
<p>However, in our testing we found that while the <code>rMR</code> import function worked with this example, and a few other files we tried, many files we were unable to import using <code>rMR</code> for reasons we were unable to diagnose. Likely, some of the inputs were not correctly set, but error messages and documentation were of little help in solving these problems. This would likely be a significant barrier to entry for novice R users, and even those more advanced. Clearly the <code>respR</code> import function requires fewer inputs. It relies on pattern matching to recognise the system the file comes from, and other data such as the time-date format. The <code>get.witrox.data</code> function has however an advantage, in that you can specify the columns to be imported.</p>
<p>While it is likely the <code>respR</code> <code>import_data</code> function may fail on occasion, and more testing is needed, it appears to perform better for Witrox files, as well as supporting other systems. As always, we encourage users to send us raw data files (from all systems) to test, particularly ones they have problems with.</p>
</div>
<div id="conversion" class="section level4">
<h4 class="hasAnchor">
<a href="#conversion" class="anchor"></a>Conversion</h4>
<p>As with <code>respR</code> and <code>respirometry</code>, <code>rMR</code> also has an O2 unit conversion function <code>DO.unit.convert</code>. Briefly, this function appears to perform correctly, though only has support for a three units (mg/L, partial pressure, or percent O2), compared to around 16 in <code>respR</code>.</p>
</div>
<div id="pcrit" class="section level4">
<h4 class="hasAnchor">
<a href="#pcrit" class="anchor"></a>PCrit</h4>
<p><code>rMR</code> implements a PCrit calculation based on the ‘broken-stick’ methods of Yeager and Ultsch (1989). See the PCrit vignette (LINK) for comparison and further discussion of this.</p>
</div>
<div id="calculating-rates" class="section level4">
<h4 class="hasAnchor">
<a href="#calculating-rates" class="anchor"></a>Calculating rates</h4>
<p><code>MR.loops</code> is the workhorse function of <code>rMR</code> that fits linear regressions to respirometry data and uses the resulting slopes to calculate oxygen uptake rates. This function relies on manually specifying one or more regions over which to fit regressions. <code>respR</code> also allows this in the <code>calc_rate</code> function, so here we will compare the results of each on the same data. Again, we use data included in <code>rMR</code> and code adapted from the documentation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## rMR load data
<span class="kw">data</span>(fishMR)
<span class="co"># create time variable in POSIXct format ##</span>
fishMR<span class="op">$</span>std.time &lt;-<span class="st"> </span><span class="kw">as.POSIXct</span>(fishMR<span class="op">$</span>Date.time, <span class="dt">format =</span> <span class="st">"%d/%m/%Y %I:%M:%S %p"</span>)

<span class="co"># set start and end of each data region to calculate rate over</span>
starts &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"2015-07-03 01:15:00"</span>, <span class="st">"2015-07-03 02:13:00"</span>, <span class="st">"2015-07-03 03:02:00"</span>, 
    <span class="st">"2015-07-03 03:50:00"</span>, <span class="st">"2015-07-03 04:50:00"</span>)
stops &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">"2015-07-03 01:44:00"</span>, <span class="st">"2015-07-03 02:35:30"</span>, <span class="st">"2015-07-03 03:25:00"</span>, 
    <span class="st">"2015-07-03 04:16:00"</span>, <span class="st">"2015-07-03 05:12:00"</span>)

<span class="co"># calculate and convert rates</span>
metR &lt;-<span class="st"> </span><span class="kw">MR.loops</span>(<span class="dt">data =</span> fishMR, <span class="dt">DO.var.name =</span> <span class="st">"DO.mgL"</span>, <span class="dt">start.idx =</span> starts, 
    <span class="dt">time.units =</span> <span class="st">"hr"</span>, <span class="dt">stop.idx =</span> stops, <span class="dt">time.var.name =</span> <span class="st">"std.time"</span>, <span class="dt">temp.C =</span> <span class="st">"temp.C"</span>, 
    <span class="dt">elevation.m =</span> <span class="dv">1180</span>, <span class="dt">bar.press =</span> <span class="ot">NULL</span>, <span class="dt">in.DO.meas =</span> <span class="st">"mg/L"</span>, <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">6</span>, <span class="dv">8</span>))</code></pre></div>
<p><img src="packages_comp_files/figure-html/unnamed-chunk-5-1.png" width="576"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
## respR extract time and o2 column, and format to numeric time starting at
## zero
fishMR_respR &lt;-<span class="st"> </span>fishMR[, <span class="kw">c</span>(<span class="dv">2</span>, <span class="dv">6</span>)]
fishMR_respR[, <span class="dv">1</span>] &lt;-<span class="st"> </span>fishMR_respR[, <span class="dv">1</span>] <span class="op">-</span><span class="st"> </span>fishMR_respR[<span class="dv">1</span>, <span class="dv">1</span>]

<span class="co"># calculate rates (same regions, expressed as row numbers)</span>
rates_respR &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/calc_rate.html">calc_rate</a></span>(fishMR_respR, <span class="dt">from =</span> <span class="kw">c</span>(<span class="dv">33400</span>, <span class="dv">36873</span>, <span class="dv">39807</span>, <span class="dv">42683</span>, 
    <span class="dv">46277</span>), <span class="dt">to =</span> <span class="kw">c</span>(<span class="dv">35136</span>, <span class="dv">38221</span>, <span class="dv">41186</span>, <span class="dv">44240</span>, <span class="dv">47596</span>), <span class="dt">by =</span> <span class="st">"row"</span>)</code></pre></div>
<p><img src="packages_comp_files/figure-html/unnamed-chunk-5-2.png" width="576"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># convert rates</span>
rates_respR_conv &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/convert_rate.html">convert_rate</a></span>(rates_respR, <span class="dt">time.unit =</span> <span class="st">"s"</span>, <span class="dt">o2.unit =</span> <span class="st">"mg/L"</span>, 
    <span class="dt">volume =</span> <span class="dv">1</span>, <span class="dt">output.unit =</span> <span class="st">"mg/h"</span>)

## compare results - both in mg/h
rates_respR_conv<span class="op">$</span>output
<span class="co">#&gt; [1] -3.205046 -3.161501 -2.870230 -2.945025 -2.900154</span>
metR<span class="op">$</span>MR.summary<span class="op">$</span>MR
<span class="co">#&gt; [1] 3.205046 3.161501 2.870230 2.945025 2.900154</span></code></pre></div>
<p>As we can see the results are identical (in <code>respR</code> we chose to express rates as negatives because they represent a negative slope and depletion of O2). This is exactly what we would expect with the same inputs and using the same data regions because both functions are using the same underlying R code to fit the regressions.</p>
<p>Note, that as with <code>respR</code>, <code>rMR</code> also allows a constant background correction to be made to rates. In the interests of space, we have not shown this.</p>
</div>
<div id="benefits-of-respr-over-rmr" class="section level4">
<h4 class="hasAnchor">
<a href="#benefits-of-respr-over-rmr" class="anchor"></a>Benefits of <code>respR</code> over <code>rMR</code>
</h4>
<p>While we are obviously somewhat biased, we see clear benefits of using <code>respR</code> over <code>rMR</code>. These include, but are not limited to -</p>
<ul>
<li><p><strong>Imports multiple data types, as well as general R data structures (data frames, tibbles, data tables, etc.)</strong> While use of other data types in <code>rMR</code> is possible, it is not intuitive, and time data must be in a specific (complex) format. It does not allow use of simple numeric time-elapsed values. Moreover, we entirely used the <code>rMR</code> data and examples in the above comparisons, because in our testing we had many problems importing our own data to <code>rMR</code>. We could not resolve many of these errors. We suspect the reliance on the complex date-time format and having to specify the precise structure of these was the cause of many of these problems.</p></li>
<li><p><strong>Statistical identification of linear regions (<code>auto_rate</code>), rather than solely manual selection</strong></p></li>
<li><p><strong>Specify data regions in several ways (by O2 range, time, or row)</strong></p></li>
<li><p><strong>Use of numeric time, rather than POSIX formatted time-data (e.g. “2015-07-03 06:15:00 GMT”) is a clear usability advantage and reduces error</strong>. <code>respr</code> has a function for formatting POSIX data to numeric time-elapsed, after which the user need not concern themselves with date-time formats. Date-time and POSIX data are notoriously difficult to work with and error prone, and we have designed <code>respR</code> to avoid these when at all possible.</p></li>
<li><p><strong>Functions have minimal and intuitive inputs while maintaining full functionality, again reducing potential for error</strong></p></li>
<li><p><strong>Better visualisations of the data regions in full context of the dataset</strong></p></li>
</ul>
</div>
</div>
<div id="respr-and-fishresp" class="section level2">
<h2 class="hasAnchor">
<a href="#respr-and-fishresp" class="anchor"></a><code>respR</code> and <code>FishResp</code>
</h2>
<p><code>FishResp</code> is still under development and there is little documentation and no guide yet available to detail how the functions in the package interrelate, or provide an example workflow (although we understand from contact with the developers these are under preparation). Therefore, our comparisons are somewhat limited to the functionality we could get to work.</p>
<p>Like <code>rMR</code>, <code>FishResp</code> is focussed on processing data from intermittent-flow, swim tunnel experiments with many equally-spaced replicates, particularly from Loligo Systems equipment (although others are supported). As well as an R package, it has GUI version available <a href="https://fishresp.org">link</a>. It is fully-featured, though highly specific towards this branch of respirometry.</p>
<p>It has some functions for exploring and pre-processing data, though as we said, we are unsure how these functions are intended to inter-relate, and they only accept input from some data sources. We provide here some comparison with overlaps with <code>respR</code> functionality where we have been able to.</p>
<div id="importing-raw-data-1" class="section level4">
<h4 class="hasAnchor">
<a href="#importing-raw-data-1" class="anchor"></a>Importing raw data</h4>
<p><code>FishResp</code> allows importing of raw data files from ’AutoResp’ (LoligoSystems), ’OxyView’ (PreSens), ’Pyro Oxygen Logger’ (PyroScience) and ’Qbox-Aqua’ (QubitSystems). However, as with <code>rMR</code> (see above) we struggled to import our own data files. We did import an AutoResp file, but this involved quite a lot of trial and error in setting the inputs (code below). However, we were not able to import a PreSens file. These additional formats apparently require additional files to be imported alongside them, and processing through multiple functions, and these requirements and workflow are not well documented at present. The AutoResp file (from a 1-channel, intermittent-flow, swim tunnel experiment on an anchovy) did however import successfully and plot the data:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## create experimental metadata
info &lt;-<span class="st"> </span><span class="kw">input.info</span>(<span class="dt">ID =</span> <span class="kw">c</span>(<span class="st">"spec1"</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>), <span class="dt">Mass =</span> <span class="kw">c</span>(<span class="dv">3</span>, 
    <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>), <span class="dt">Volume =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>, <span class="ot">NA</span>), 
    <span class="dt">DO.unit =</span> <span class="kw">c</span>(<span class="st">"mg/L"</span>))

## import raw data file
SMR.raw &lt;-<span class="st"> </span><span class="kw">import.meas</span>(<span class="dt">file =</span> <span class="st">"anch01_raw.txt"</span>, <span class="dt">info.data =</span> info, <span class="dt">logger =</span> <span class="st">"AutoResp"</span>, 
    <span class="dt">n.chamber =</span> <span class="dv">8</span>, <span class="dt">date.format =</span> <span class="st">"DMY"</span>, <span class="dt">start.measure =</span> <span class="st">"10:10:00"</span>, <span class="dt">stop.measure =</span> <span class="st">"16:00:00"</span>, 
    <span class="dt">plot.temperature =</span> F, <span class="dt">plot.oxygen =</span> F)</code></pre></div>
<p><img src="../../../../../Dropbox%20(Sydney%20Uni)/R/respR/vignettes/pkgdown/anch_fishresp.png" width="700px"> We can’t compare the importing functionality of <code>FishResp</code> with <code>respR</code>, as we do not yet support direct importing of AutoResp files (this is planned, and currently they can easily be imported using other methods such as <code>read.csv()</code> and analysed in <code>respR</code>).</p>
<p>It should be noted the importing of raw data files in <code>FishResp</code> is apparently <strong>obligatory</strong>: there is no easy way to use other data structures or files in the package. Importing is an compulsory step to format the data to a structure that the functions will understand. <code>respR</code> does not have this restriction and allows a range of data structures to be used in <em>all</em> functions, allowing all variations in experimental type or data to be analysed.</p>
</div>
<div id="calculating-rates-1" class="section level4">
<h4 class="hasAnchor">
<a href="#calculating-rates-1" class="anchor"></a>Calculating rates</h4>
<p>We cannot analyse the above experimental data in <code>FishResp</code> because a major limitation of <code>FishResp</code> is that it apparently assumes replicates occur at regular intervals. This is true in some intermittent-flow respirometry experiments, but certainly not all. Experimental measurement periods and flushes are often triggered manually or done at irregular intervals. There is no clear way to accommodate these data in <code>FishResp</code>.</p>
<p>Therefore, we use here data included in <code>FishResp</code> that has already been imported and prepared in various ways, and the code is mostly taken from the documentation. We will use these data to compare the outputs of <code>FishResp</code> to <code>respR</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## FishResp Analysis

## load data
<span class="kw">data</span>(SMR.raw)  <span class="co"># raw data</span>
<span class="kw">data</span>(info)  <span class="co"># experiment metadata</span>
<span class="kw">data</span>(pre)  <span class="co"># background rate - already processed and calculated</span>

## apply background
SMR.clean &lt;-<span class="st"> </span><span class="kw">correct.meas</span>(<span class="dt">info.data =</span> info, <span class="dt">pre.data =</span> pre, <span class="dt">meas.data =</span> SMR.raw, 
    <span class="dt">method =</span> <span class="st">"pre.test"</span>)

## calculate slopes
SMR.slope &lt;-<span class="st"> </span><span class="kw">extract.slope</span>(SMR.clean, <span class="dt">method =</span> <span class="st">"all"</span>, <span class="dt">n.slope =</span> <span class="dv">3</span>, <span class="dt">r2 =</span> <span class="fl">0.95</span>, 
    <span class="dt">length =</span> <span class="dv">1200</span>)

## convert
SMR &lt;-<span class="st"> </span><span class="kw">calculate.MR</span>(SMR.slope, <span class="dt">density =</span> <span class="dv">1000</span>, <span class="dt">plot.BR =</span> F, <span class="dt">plot.MR.abs =</span> F, 
    <span class="dt">plot.MR.mass =</span> F)

## reorder - for comparison with respR results
smr_all &lt;-<span class="st"> </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(SMR, Ind, Phase)</code></pre></div>
<p>Now the <code>respR</code> analysis of the same data (though only a single channel), using the same inputs. We use regular R data selection syntax to extract rates from multiple even-spaced data regions (here spaced at every 1200 rows).</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## respR Analysis

## rearrange background data
bg &lt;-<span class="st"> </span><span class="kw">data.frame</span>(pre[<span class="dv">1</span><span class="op">:</span><span class="dv">1200</span>, <span class="dv">3</span>], pre[<span class="dv">1</span><span class="op">:</span><span class="dv">1200</span>, <span class="dv">6</span>])

## calculate bg rate
bg_r &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/calc_rate.bg.html">calc_rate.bg</a></span>(bg, <span class="dt">xcol =</span> <span class="dv">1</span>, <span class="dt">ycol =</span> <span class="dv">2</span>, <span class="dt">plot =</span> F)

## Extract specimen 1 data
spec1 &lt;-<span class="st"> </span>SMR.raw[, <span class="kw">c</span>(<span class="dv">13</span>, <span class="dv">4</span>)]

## calculate rates for each replicate
spec1_r &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/calc_rate.html">calc_rate</a></span>(spec1, <span class="dt">from =</span> <span class="kw">seq</span>(<span class="dv">1</span>, <span class="dv">18001</span>, <span class="dv">1200</span>), <span class="dt">to =</span> <span class="kw">seq</span>(<span class="dv">1200</span>, <span class="dv">19200</span>, 
    <span class="dv">1200</span>), <span class="dt">by =</span> <span class="st">"row"</span>)</code></pre></div>
<p><img src="packages_comp_files/figure-html/unnamed-chunk-9-1.png" width="576"></p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
## adjust for background
spec1_r_adj &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/adjust_rate.html">adjust_rate</a></span>(spec1_r, bg_r)
<span class="co">#&gt; </span>
<span class="co">#&gt; Rate adjustments applied. Use print() command for more info.</span>

## convert.  NB - we use effective volume, that is volume of respirometer
## minus volume of specimen.  FishResp calculates this internally
spec1_rates &lt;-<span class="st"> </span><span class="kw"><a href="../../reference/convert_rate.html">convert_rate</a></span>(spec1_r_adj, <span class="dt">time.unit =</span> <span class="st">"s"</span>, <span class="dt">o2.unit =</span> <span class="st">"mg/L"</span>, 
    <span class="dt">output.unit =</span> <span class="st">"mg/h/kg"</span>, <span class="dt">mass =</span> <span class="fl">0.00186</span>, <span class="dt">volume =</span> <span class="fl">0.24814</span>)</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## Compare results - both in mg/h/kg

<span class="co"># FishResp</span>
<span class="kw">round</span>(smr_all<span class="op">$</span>MR.mass[<span class="dv">1</span><span class="op">:</span><span class="dv">16</span>], <span class="dv">1</span>)
<span class="co">#&gt;  [1] 423.4 456.4 402.6 414.7 483.9 431.4 555.1 393.1 549.7 453.7 396.4</span>
<span class="co">#&gt; [12] 430.4 449.0 609.5 400.9 388.6</span>

<span class="co"># respR</span>
<span class="kw">round</span>(<span class="op">-</span><span class="dv">1</span> <span class="op">*</span><span class="st"> </span>spec1_rates<span class="op">$</span>output, <span class="dv">1</span>)
<span class="co">#&gt;  [1] 423.4 456.4 402.6 414.7 483.9 431.4 555.1 393.1 549.7 453.7 396.4</span>
<span class="co">#&gt; [12] 430.4 449.0 609.5 400.9 388.6</span></code></pre></div>
<p>As we can see the rates calculated by both packages are identical. As with <code>rMR</code>, this is exactly what we would expect as we are manually selecting the same data regions and user underlying R code to fit the linear regressions.</p>
</div>
<div id="options-in-fishresp" class="section level4">
<h4 class="hasAnchor">
<a href="#options-in-fishresp" class="anchor"></a>Options in <code>FishResp</code>
</h4>
<p><code>FishResp</code> (as far as we can tell from the current documentation) only allows fitting regressions across the entire width of what is defined an experimental measurement period, or replicate. There is little flexibility in modifying this. This may or may not be appropriate depending on the data and experiment. There is a <code>length</code> operator in <code>extract.slope</code>, but this only curtails the latter end of the regression; there appears to be no way of modifying the start location. This is a curious decision and less than ideal practice; if a user wanted to only use data from part of an experimental replicate, typically it is the initial stages they want to remove, as these are just after the flush when the animal might have been disturbed, or probe lag means the probe has not caught up, and overall the system has not reached a steady state. Moreover, this <code>length</code> operator applies to all replicates; there is no easy way of fitting regressions of different length over different replicates. <code>respR</code> has functionality to easily modify the starts and ends of data locations by time, O2 amount or row number; <code>FishResp</code>’s ability to do this is very limited.</p>
<p>The <code>extract.slope</code> function is able to sort and select the rates from each replicate according to some simple criteria, for example outputting a selection of rates ordered by minimum or maximum, or based on R2 values or a percentile. <code>respR</code> does not have this option specifically, but it is straightforward from the results via typical R selection syntax.</p>
<p>It is also not entirely clear how <code>FishResp</code> would work on continuous data where the O2 is also recorded through flushes, or when each replicate is separated from another by a waiting period (this sample data has one directly after the next). And as we said, processing of data that does not adhere to a rigid structure or cycle of measurement periods is difficult, if not impossible.</p>
</div>
<div id="benefits-of-respr-over-fishresp" class="section level4">
<h4 class="hasAnchor">
<a href="#benefits-of-respr-over-fishresp" class="anchor"></a>Benefits of <code>respR</code> over <code>FishResp</code>
</h4>
<p>Overall <code>FishResp</code> is a fine package if you are conducting very a specific type of experiment. Its focus is on processing large amounts of experimental replicates from a specific respirometry experiment type, using specific equipment. We have no doubt it works very well if you are conducting these types of experiment, but there is little to no flexibility to process other types of experiment or data sources.</p>
<p><code>FishResp</code> can process many experiments at once, both from different individuals and many replicates from individuals. Whether this is an advantage or disadvantage is debatable. Although it can be automated by anyone with basic R skills, <code>respR</code> was specifically designed to process single experiments at a time because we feel (and this is general good practice in data analysis) that respirometry data should be thoroughly explored and visualised prior to any analyses. This may increase the time taken to conduct analyses (though we would argue other time-saving advantages of <code>respR</code> outweigh this), but we feel is safer and less likely to result in mistakes. <code>FishResp</code> has some data visualisation and exploration functions, but its focus seems to be the ability to process great numbers of experiments and replicates at once.</p>
<p>It does however have a couple of advantages over <code>respR</code> which may influence user choice on which to use:</p>
<ul>
<li><p><strong>Support for dynamic background correction.</strong> Pre- and post-experiment background rates can be applied as average, linear or exponential interpolations. Support for dynamic background correction is planned in <code>respR</code> (though see LINK vignette for how it can be achieved presently).</p></li>
<li><p><strong>Support for raw data files from multiple systems at once.</strong> Again, we plan to support importing files from as many systems as we can get sample files for in <code>respR</code> in the near future. We are unsure of the benefits of supporting other data inputs that <code>FishResp</code> supports (e.g. hardware interfaces such as AquaResp), but are looking into it. Again though, <code>respR</code> is system agnostic; we know of no respirometry system that does not output data in a form that is easily imported into R using generic functions.</p></li>
</ul>
<p>However, we feel <code>FishResp</code> has substantial drawbacks in comparison to <code>respR</code>:</p>
<ul>
<li>It is designed for intermittent-flow respirometry with set width of cycled replicates. There is no easy way to analyse closed, flowthrough or non-regular intermittent-flow respirometry data.<br>
</li>
<li>It supports importing data from some specific systems, but little support for regular R data structures.</li>
<li>Complex inputs: as with <code>rMR</code>, complex date-time inputs are a particular source of frustration and potential error.<br>
</li>
<li>Length and location of data regions over which to fit regression cannot be easily adjusted.<br>
</li>
<li>Manual selection of data regions only, no equivalent to <code><a href="../../reference/auto_rate.html">auto_rate()</a></code> in <code>respR</code><br>
</li>
<li>Complicated, not well documented. We expect this to change, but at present the package has a substantial barrier to entry, even for advanced R users, in that it is very difficult to use and has little documentation.</li>
</ul>
<p>We will update this vignette with more detail and comparisons of the functionality once the developers release the guides that we know are in preparation.</p>
</div>
</div>
<div id="summary" class="section level2">
<h2 class="hasAnchor">
<a href="#summary" class="anchor"></a>Summary</h2>
<p>The packages we examined here are the only other packages we know of to process respirometry data in R (but see LINK vignette on <code>LoLinR</code>). However, they have only a small subset of the functionality contained in <code>respR</code>. Where they overlap in functionality, we feel <code>respR</code> is clearly easier to use and less prone to input errors or difficult to diagnose problems. <code>respR</code> has been designed to be as flexible as possible, accepting any and all respirometry data and experiment types.</p>
<p>These packages are focused on intermittent-flow respirometry, with multiple, regularly-spaced experimental replicates. Both analyse these data fine if you want to manually specify data regions over which to determine rates, but we would argue <code>respR</code> is equally capable of doing so (see the LINK vignette). In addition, the <code>respR</code> workflow would allow for use of <code><a href="../../reference/auto_rate.html">auto_rate()</a></code> which determines linear regions of data in a statistically robust way, rather than relying on user selected regions. The packages here generally insist on using complex date-time formats for the time metric, which we found led to lots of useability issues. There is no real reason why this should be the case; <code>respR</code> avoids this by only allowing numeric time-elapsed data, and providing two functions to easily prepare data to this form. Overall, a major barrier to use of both packages is getting data into them in a recognisable format. We had trouble importing data into both. <code>respR</code> is clearly superior here in that as well as allowing import of raw data files (though this is still in development and there are still systems not yet supported), it accepts almost any form of typical R data structure.</p>
<p>Users are very much encouraged to explore these packages and their functionality. They may, with their specific focuses, contain functionality that suits your particular analyses or workflows better than <code>respR</code>. However, <code>respR</code> has been designed to be highly flexible, adaptable, and universal and with some organisation can be used for analysis of any aquatic respirometry data or experiment type we are aware of. It also has statistical linear-detection functionality which is not present in these packages. We compare the performance of this to the only other R package which has similar functionality in the LINK vignette.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#respr-and-respirometry"><code>respR</code> and <code>respirometry</code></a></li>
      <li><a href="#respr-and-rmr"><code>respR</code> and <code>rMR</code></a></li>
      <li><a href="#respr-and-fishresp"><code>respR</code> and <code>FishResp</code></a></li>
      <li><a href="#summary">Summary</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Januar Harianto, Nicholas Carey.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
